<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dijital İade Haritası</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="video-overlay" class="hidden">
        <button id="close-video-btn" title="Kapat"><i class="fa-solid fa-times"></i></button>
        <video id="museum-video" src="assets/muze.mp4" loop></video>
    </div>

    <div id="intro-screen" class="intro-overlay">
        <div class="intro-content glass-panel">
            <h1 class="main-title" data-lang="title">DİJİTAL İADE HARİTASI</h1>
            <p class="intro-desc" data-lang="desc">
                Anadolu kökenli kültür varlıklarının dijital envanteri. 
                Bu çalışma, eserlerin kökenine dair bilimsel verileri sunmaktadır.
            </p>
            
            <div class="intro-actions">
                <button id="btn-start-explore" class="action-btn primary">
                    <i class="fa-solid fa-map-location-dot"></i> <span data-lang="explore">Haritayı Keşfet</span>
                </button>
                <button id="btn-start-tour" class="action-btn secondary">
                    <i class="fa-solid fa-circle-question"></i> <span data-lang="help">Rehber Turu</span>
                </button>
                <button id="btn-start-game" class="action-btn gold">
                    <i class="fa-solid fa-compass"></i> <span data-lang="game">Oyunu Başlat</span>
                </button>
            </div>
            
            <div style="margin-top: 30px; position: relative; z-index: 10005;">
                <button id="btn-open-museum" class="museum-btn">
                    SAMSUN DİJİTAL İADE MÜZESİ
                </button>
            </div>
        </div>
    </div>

    <div id="spotlight-overlay" class="hidden">
        <div id="spotlight-mask"></div>
        <div id="spotlight-content" class="popover-card">
            <div class="popover-header">
                <i class="fa-solid fa-info-circle"></i> <span id="tour-title">Başlık</span>
            </div>
            <p id="tour-desc">Açıklama buraya gelecek.</p>
            <div class="popover-footer">
                <span id="tour-step">1/5</span>
                <button id="tour-next-btn" class="tour-btn">İleri</button>
            </div>
        </div>
    </div>

    <header id="main-header" class="glass-header">
        <div class="header-left">
            <button id="toggle-sidebar" class="icon-btn"><i class="fa-solid fa-bars"></i></button>
        </div>
        <div class="header-center">
            <h1 data-lang="headerTitle">DİJİTAL İADE HARİTASI</h1>
        </div>
        <div class="header-right">
            <button id="btn-game-nav" class="icon-btn" title="Oyun Modu"><i class="fa-solid fa-compass"></i></button>
            <button id="btn-settings" class="icon-btn" title="Ayarlar"><i class="fa-solid fa-cog"></i></button>
        </div>
    </header>

    <div id="app-container">
        
        <div id="sidebar" class="sidebar">
            <div class="sidebar-content">
                <div class="search-box">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="search-input" placeholder="Eser Ara...">
                </div>

                <div class="filter-group">
                    <select id="city-filter" class="filter-select">
                        <option value="all" data-lang="allCities">Tüm Şehirler</option>
                    </select>
                </div>

                <div id="artifact-list" class="list-container"></div>
            </div>
        </div>

        <div id="map"></div>
        
        <div id="counter-badge" class="map-badge">
            <span data-lang="displayed">Görüntülenen</span>: <span id="visible-count">21</span>/21
        </div>

        <div id="game-ui" class="game-panel hidden">
            <div class="game-header">
                <span class="q-label"><span data-lang="gameQTitle">SORU</span> <span id="q-counter">1/5</span></span>
                <span class="score-label"><span data-lang="gameScoreTitle">PUAN</span>: <span id="score-display">0</span></span>
            </div>
            <div class="question-box">
                <p data-lang="gameQuestion">Bu eser hangi lokasyonda olmalı?</p>
                <h3 id="target-name">...</h3>
                <div class="hint-box">
                    <i class="fa-solid fa-lightbulb"></i> <span id="target-hint">...</span>
                </div>
            </div>
            <button id="abort-game" class="abort-btn" data-lang="endGame">Oyunu Bitir</button>
        </div>

        <div id="toast-container"></div>

        <div id="model-modal" class="modal-overlay hidden">
            <div class="modal-content large glass-panel">
                <button class="close-modal-btn" onclick="closeModelModal()"><i class="fa-solid fa-times"></i></button>
                <div id="model-wrapper"></div>
                <div class="model-attribution">
                    <p>Generated by Trip AI Studio</p>
                    <small>CC Attribution 4.0 International</small>
                </div>
            </div>
        </div>

        <div id="settings-modal" class="modal-overlay hidden">
            <div class="modal-content settings-box glass-panel">
                <div class="modal-header">
                    <h2 data-lang="settings">Ayarlar</h2>
                    <button class="close-modal-btn" onclick="toggleModal('settings-modal', false)">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </div>
                
                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fa-solid fa-moon"></i>
                        <span data-lang="darkMode">Karanlık Tema</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>

                <div class="setting-row">
                    <div class="setting-label">
                        <i class="fa-solid fa-language"></i>
                        <span data-lang="language">Dil / Language (EN)</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="lang-toggle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="settings-info">
                    <small>v3.0 - Samsun Digital Repatriation Project</small>
                </div>
            </div>
        </div>

        <div id="game-over-modal" class="modal-overlay hidden">
            <div class="modal-content medium glass-panel text-center">
                <i class="fa-solid fa-trophy gold-icon"></i>
                <h2 data-lang="gameOver">Oyun Bitti!</h2>
                <p id="final-score">Toplam Puan: 0</p>
                <div class="modal-actions">
                    <button onclick="restartGame()" class="action-btn primary" data-lang="playAgain">Tekrar Oyna</button>
                    <button onclick="closeGame()" class="action-btn secondary" data-lang="returnMap">Haritaya Dön</button>
                </div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>